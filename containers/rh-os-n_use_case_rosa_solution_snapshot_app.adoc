---
sidebar: sidebar 
permalink: containers/rh-os-n_use_case_rosa_solution_snapshot_app.html 
keywords: OpenShift, OCP, Trident, NetApp ONTAP, Red Hat OpenShift Service on AWS, 
summary: Serviço OpenShift da Red Hat na AWS com o NetApp ONTAP 
---
= Serviço OpenShift da Red Hat na AWS com o NetApp ONTAP
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
**1. Criar um instantâneo do volume do aplicativo** nesta seção, mostraremos como criar um instantâneo do Trident do volume associado ao aplicativo.esta será uma cópia pontual dos dados do aplicativo. Se os dados do aplicativo forem perdidos, podemos recuperar os dados deste ponto na cópia do tempo. OBSERVAÇÃO: Esse snapshot é armazenado no mesmo agregado que o volume original no ONTAP (no local ou na nuvem). Então, se o agregado de armazenamento do ONTAP for perdido, não podemos recuperar os dados do aplicativo de seu snapshot.

**um Crie um VolumeSnapshotClass Salve o seguinte manifesto em um arquivo chamado volume-snapshot-class.yaml

[source]
----
apiVersion: snapshot.storage.k8s.io/v1
kind: VolumeSnapshotClass
metadata:
 name: fsx-snapclass
driver: csi.trident.netapp.io
deletionPolicy: Delete
----
Crie um instantâneo usando o manifesto acima.

image:redhat_openshift_container_rosa_image20.png["classe do snapshot"]

**b.. Em seguida, crie um instantâneo** Crie um instantâneo do PVC existente criando VolumeSnapshot para obter uma cópia pontual dos seus dados PostgreSQL. Isso cria um snapshot do FSX que quase não ocupa espaço no backend do sistema de arquivos. Salve o manifesto a seguir em um arquivo chamado volume-snapshot.yaml:

[source]
----
apiVersion: snapshot.storage.k8s.io/v1
kind: VolumeSnapshot
metadata:
 name: postgresql-volume-snap-01
spec:
 volumeSnapshotClassName: fsx-snapclass
 source:
   persistentVolumeClaimName: data-postgresql-0
----
**c.. Crie o instantâneo do volume e confirme que ele foi criado**

Excluir o banco de dados para simular a perda de dados (a perda de dados pode acontecer devido a uma variedade de razões, aqui estamos apenas simulando-o excluindo o banco de dados)

image:redhat_openshift_container_rosa_image21.png["snapshot de volume"]

**d.. Excluir o banco de dados para simular a perda de dados (a perda de dados pode acontecer devido a uma variedade de razões, aqui estamos apenas simulando-o excluindo o banco de dados)**

image:redhat_openshift_container_rosa_image22.png["ligação à base de dados"]

image:redhat_openshift_container_rosa_image23.png["solte o banco de dados"]
